这份设计说明书将 `c1` 定位为一个现代化的 C 语言脚手架与简单包管理工具，旨在解决 C 语言开发中“初始化繁琐”和“依赖管理混乱”的痛点。
包管理是试验性功能。重点是快速搭建c的开发环境。方便各种测试。

---

# `c1` 工具设计说明书 (Draft v1.0)

## 1. 项目愿景

**`c1` (C-One)** 是一个向 `uv` (Python) 看齐的极简 C 语言项目管理工具。它强制执行 **Pitchfork Layout** 标准，并基于 **Modern CMake** 提供自动化的文件维护与依赖同步功能，让开发者能像写高级语言一样快速开启 C 项目。

---

## 2. 核心功能规范

### 2.1 项目初始化 (`c1 init`)

* **安全检查**：必须在空目录执行，若检测到任何非隐藏文件则终止。
* **脚手架生成**：
* `include/` & `src/`：源码目录。
* `main.c`：默认打印 "Hello [Project Name]"。
* `CMakeLists.txt`：预置源文件/头文件锚点注释（`@c1_sources`, `@c1_headers`）。
* `project.toml`：项目配置文件。
* README.md

* **版本控制**：自动执行 `git init` 。

### 2.2 模块增删 (`c1 create`)

* **原子化创建**：同步生成 `src/name.c` 和 `include/name.h`。
* **自动注册**：通过解析 CMakeLists.txt 的锚点，将新文件自动填入 `set(SOURCES ...)` 列表中，无需手动修改编译脚本。

### 2.3 依赖同步 (`c1 install/sync`)

* **配置驱动**：解析 `project.toml` 中的 `[dependencies]` 字段。
* **自动化下载**：支持从 Git 仓库（或 Release URL）下载依赖至项目的  `external/` 目录。

---

## 3. 配置文件设计 (`project.toml`)

采用 TOML 格式，平衡可读性与解析效率。

```toml
[project]
name = "my_agent"
version = "0.1.0"
edition = "2026"   # 对应 C 标准，如 99, 11
description = "A lightweight agent based on arc-c"

[dependencies]
# 核心依赖：你的项目 arc-c
arc-c = { git = "https://github.com/weynechen/arc-c.git", tag = "v0.5.0" }
# 第三方依赖示例
cjson = { git = "https://github.com/DaveGamble/cJSON.git", branch = "master" }

[build]
compiler = "gcc"
flags = ["-O3", "-Wall"]

```
配置文件更多是预留设计。
---

## 5. 交互示例

```bash
$ mkdir my_new_app && cd my_new_app
$ c1 init my_new_app
# ... 生成目录并 git init ...

$ c1 create tools
# ... 生成 tools.c/h 并更新 CMakeLists.txt ...

# 修改 project.toml 添加 arc-c 依赖后
$ c1 sync
# ... 正在克隆 arc-c 至 external/ ...

```
额外命令说明
输入 c1 init ，则默认使用上层文件夹名称作为项目名称

CMake模板:
```txt

cmake_minimum_required(VERSION 3.16)
project({{PROJECT_NAME}} C)

set(CMAKE_C_STANDARD 99)
set(CMAKE_C_STANDARD_REQUIRED ON)

# 源文件列表
set(SOURCES
    src/main.c
    # @c1_sources
)

# 头文件列表
set(HEADERS
    # @c1_headers
)

add_executable(${PROJECT_NAME} ${SOURCES} ${HEADERS})

# 包含目录：遵循 Pitchfork 规范，头文件在 include/
target_include_directories(${PROJECT_NAME} PRIVATE 
    ${CMAKE_CURRENT_SOURCE_DIR}/include
)

# 默认链接库 (预留示例)
# target_link_libraries(${PROJECT_NAME} PRIVATE m)
```
c1 create 生成文件时，需要默认生成
```
#ifndef c1_headers
#define ...
```
并且源文件需要包含头文件
---

使用rust开发
